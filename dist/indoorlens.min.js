(()=>{var Ht=Object.defineProperty;var X=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wt=(e,t)=>{for(var n in t)Ht(e,n,{get:t[n],enumerable:!0})};var it,ae,N,bt,vt,wt,nt,Lt,It,_,qt,w,rt,se,Tt,Et,ot,J,at=X(()=>{it=Object.freeze({Path:0,LineShape:1,SurfaceShape:2,Transition_NonWCHR:3,Transition_WCHR:4,Location:5}),ae=Object.freeze({0:"Path",1:"LineShape",2:"SurfaceShape",3:"Transition_NonWCHR",4:"Transition_WCHR",5:"Location"}),N=["#1e81b0","#c41837","#00b359"],bt=class{constructor(t={}){this.position=new J(t.position),this.associatedBranches=[...t.associatedBranchKeys??[]],this.guid=t.GUID??null}},vt=class{constructor(t={}){this.key=t.key??0,this.groupId=t.groupId??"",this.layerId=t.layerId??"",this.nodeDistances=[...t.nodeDistances??[]],this.nodes=(t.nodes??[]).map(n=>new bt(n))}},wt=class{constructor(t={}){this.nodes=(t.Nodes??[]).map(n=>new J({x:n.X??0,y:n.Y??0,z:n.Z??0})),this.startBranchKey=t.StartBranchKey??"",this.endBranchKey=t.EndBranchKey??"",this.pathLength=t.PathLength??"",this.fromId=t.FromMapLocationId??"",this.toId=t.ToMapLocationId??""}},nt=class{constructor(t={}){this.floors={};for(let[n,i]of Object.entries(t))this.floors[n]=new wt(i)}},Lt=class{constructor(t={}){this.id=t.id??"",this.lineThickness=t.lineThickness??1;let n=t.color??{r:1,g:1,b:1,a:1};this.color=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`,this.enabled=!!t.enabled,this.renderType=Number(t.renderType)??it.Path}},It=class{constructor(t={}){this.layers=(t.layers??[]).map(n=>new Lt(n)),this.id=t.id??"",this.groupName=t.groupName??"",this.roofHeight=t.roofHeight??0,this.enabled=!!t.enabled,this.opacity=t.opacity??1}},_=class{constructor(t={}){this.branches=(t.branches??[]).reduce((n,i)=>{let s=new vt(i);return n[s.key]=s,n},{}),this.groups=(t.groups??[]).map(n=>new It(n))}},qt=Object.freeze({Custom:0,Entrance:1,Exit:2,Information:3,Restroom:4,Elevator:5,Escalator:6,Stairs:7,Parking:8,AccessibleRamp:9,ATM:10,FirstAid:11,Security:12,FireExtinguisher:13,EmergencyExit:14,LostAndFound:15,WaitingArea:16,ChargingStation:17,VendingMachine:18,Cafeteria:19,WaterFountain:20,SmokingArea:21,Playground:22,GreenSpace:23,Kiosk:24,Current_Kiosk:25}),w=Object.freeze({0:"Custom",1:"Entrance",2:"Exit",3:"Information",4:"Restroom",5:"Elevator",6:"Escalator",7:"Stairs",8:"Parking",9:"AccessibleRamp",10:"ATM",11:"FirstAid",12:"Security",13:"FireExtinguisher",14:"EmergencyExit",15:"LostAndFound",16:"WaitingArea",17:"ChargingStation",18:"VendingMachine",19:"Cafeteria",20:"WaterFountain",21:"SmokingArea",22:"Playground",23:"GreenSpace",24:"Kiosk",25:"Current_Kiosk"}),rt=Object.freeze({None:0,Icon:1,Label:2}),se=Object.freeze({0:"None",1:"Icon",2:"Label"}),Tt=class{constructor(t={}){this.branchKey=t.branchKey??0,this.distance=t.distance??0}},Et=class{constructor(t={}){this.id=t.id??"",this.name=t.name??"",this.tags=t.tags??"",this.groupId=t.groupId??"",this.center=new J(t.center),this.locationType=Number(t.locationType)??qt.Custom,this.locationDisplayType=Number(t.locationDisplayType)??rt.Custom,this.locations=(t.locations??[]).map(n=>new Tt(n)),this.surfaceBranchKeys=[...t.surfaceBranchKeys??[]]}},ot=class{constructor(t={}){this.id=t.id??"",this.name=t.name??"",this.tags=t.tags??"",this.locations=(t.locations??[]).map(n=>new Et(n))}},J=class{constructor(t={}){this.x=t.x??t.X??0,this.y=t.y??t.Y??0,this.z=t.z??t.Z??0}}});function kt(e){let t=!1,n=0,i=0;e.addEventListener("wheel",o=>{let r=o.deltaMode===1?15:1,u=performance.now(),c=e.getBoundingClientRect(),d=o.clientX-c.left-c.width/2-y.x,p=o.clientY-c.top-c.height/2-y.y;if(t&&!o.altKey&&Math.abs(o.deltaY)>Math.abs(o.deltaX)&&(t=!1,n=0),o.altKey&&(t=!0),t){o.preventDefault();let L=(o.deltaX||-o.deltaY)*.002*r;B+=L,n=L,i=u;let I=Ut(d,p,L);y.x+=d-I.x,y.y+=p-I.y,x();return}if(o.shiftKey){o.preventDefault(),y.x-=o.deltaX*r,y.y-=o.deltaY*r,x();return}o.preventDefault();let g=Math.exp(-o.deltaY*.0015*r);E*=g,y.x-=d*(g-1),y.y-=p*(g-1),x()},{passive:!1});let s=[];e.addEventListener("touchstart",o=>{o.preventDefault(),s=[...o.touches]},{passive:!1}),e.addEventListener("touchmove",o=>{o.preventDefault();let[r,u]=s,[c,d]=o.touches;if(o.touches.length===1){let p=c.clientX-r.clientX,g=c.clientY-r.clientY;y.x+=p,y.y+=g}else if(o.touches.length===2){let p=(r.clientX+u.clientX)/2,g=(r.clientY+u.clientY)/2,L=(c.clientX+d.clientX)/2,I=(c.clientY+d.clientY)/2,f=Math.hypot(u.clientX-r.clientX,u.clientY-r.clientY),b=Math.hypot(d.clientX-c.clientX,d.clientY-c.clientY)/f;E*=b;let T=Math.atan2(u.clientY-r.clientY,u.clientX-r.clientX),k=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX)-T;B+=k,y.x+=L-p,y.y+=I-g}s=[...o.touches],x()},{passive:!1}),e.addEventListener("mousedown",o=>{o.preventDefault(),V=!0,H.x=o.clientX,H.y=o.clientY}),window.addEventListener("mousemove",o=>{if(!V)return;o.preventDefault();let r=o.clientX-H.x,u=o.clientY-H.y;y.x+=r,y.y+=u,H.x=o.clientX,H.y=o.clientY,x()}),window.addEventListener("mouseup",o=>{V&&(V=!1)}),e.addEventListener("mouseleave",o=>{V=!1});function l(){if(requestAnimationFrame(l),!t)return;let r=(performance.now()-i)/1e3;if(n*=.94**(r*60),Math.abs(n)<1e-4){t=!1;return}B+=n,x()}l()}function Ut(e,t,n){let i=Math.cos(n),s=Math.sin(n);return{x:e*i-t*s,y:e*s+t*i}}var E,B,y,V,H,st=X(()=>{Q();E=10,B=0,y={x:0,y:0},V=!1,H={x:0,y:0}});function St(e,t){Y=e,F=t,a=e.getContext("2d"),D=t.getContext("2d"),F.width=Y.width,F.height=Y.height,D.clearRect(0,0,F.width,F.height),kt(Y)}function x(){if(!P)return;a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,Y.width,Y.height);let e=window.devicePixelRatio||1,t=Y.getBoundingClientRect(),n=(t.width/2+y.x)*e,i=(t.height/2+y.y)*e;a.translate(n,i),a.rotate(B),a.scale(E,E);for(let l=0;l<P.groups.length;l++){l==h?a.globalAlpha=1:l!==h&&l>h?a.globalAlpha=0:l!==h&&l<h&&(a.globalAlpha=.2);let o=P.groups[l];for(let r of o.layers)r.renderType===it.SurfaceShape?te(r,o):r.renderType===it.LineShape&&ee(r,o)}let s=Jt(E);if(s>0){if(a.globalAlpha=s,C)for(let[r,u]of Object.entries(C.floors)){if(z(r)!=h)continue;let c=W(u.fromId),d=W(u.toId);(w[c.locationType]=="Stairs"||w[c.locationType]=="Elevator")&&lt(c,N[0]),(w[d.locationType]=="Stairs"||w[d.locationType]=="Elevator")&&lt(d,N[0])}let l=W(S),o=W(O);if(l&&z(l.groupId)===h&&lt(l,N[2]),o&&z(o.groupId)===h&&lt(o,N[1]),C)for(let[r,u]of Object.entries(C.floors)){if(z(r)!=h)continue;let c=u.nodes;if(c.length>0){a.save(),a.lineWidth=2/E,a.strokeStyle=N[0],a.beginPath(),a.moveTo(c[0].x,c[0].z);for(let d=1;d<c.length;d++)a.lineTo(c[d].x,c[d].z);a.stroke(),a.restore()}}if(!$)return;for(let r of $.locations)if(z(r.groupId)===h){if(r.locationDisplayType===rt.Icon){let u=Vt(Qt(r));u.loaded&&(a.save(),a.translate(r.center.x,r.center.z),a.rotate(-B),a.scale(1/E,1/E),a.drawImage(u.img,-36/2,-36/2,36,36),a.restore())}if(r.locationDisplayType===rt.Label){let u=r.name||w[r.locationType];a.save(),a.translate(r.center.x,r.center.z),a.rotate(-B),a.scale(1/E,1/E),a.font="20px Arial",a.textAlign="center",a.textBaseline="middle",a.fillStyle="#000",a.fillText(u,0,0),a.restore()}}a.restore()}}function Rt(e,t,n){return e+(t-e)*n}function _t(e,t,n){return{x:Rt(e.x,t.x,n),y:Rt(e.z,t.z,n)}}function Ot(){if(!C)return;let e=K.groups[h],t=C.floors[e.id];if(!t)return;let n=t.nodes;if(!n||n.length<2)return;A=Math.min(A+Gt,U);let i=0;for(;i<ct.length&&j[i+1]<A;)i++;let s=j[i],l=ct[i]||0,o=l>0?(A-s)/l:0,r=n[i],u=n[i+1],c=_t(r,u,o);A==U==1&&(A=0),D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,F.width,F.height);let d=Y.getBoundingClientRect(),p=window.devicePixelRatio||1,g=(d.width/2+y.x)*p,L=(d.height/2+y.y)*p,I=c.x*E,f=c.y*E,M=Math.cos(B),b=Math.sin(B),T=I*M-f*b,v=I*b+f*M,k=T+g,R=v+L,m=6;D.beginPath(),D.arc(k,R,m,0,Math.PI*2),D.fillStyle="red",D.fill(),A<U&&(Z=requestAnimationFrame(Ot))}function Jt(e){return e>=9?1:e<=7?0:(e-7)/.5}function Vt(e){if(Ct.has(e))return Ct.get(e);let t=new Image;t.crossOrigin="anonymous",t.src=`https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/${e}`;let n={img:t,loaded:!1};return t.onload=()=>{n.loaded=!0,x()},Ct.set(e,n),n}function Qt(e){switch(w[e.locationType]){case"Exit":return"Exit.png";case"Entrance":return"Entrance.png";case"Restroom":return"Restroom.png";case"Elevator":return"Elevator.png";case"FireExtinguisher":return"FireExtinguisher.png";case"Kiosk":return"Kiosk.png";case"Information":return"Information.png";case"Current_Kiosk":return"KioskCurrent.png";case"MedicalKit":return"MedicalKit.png";case"Stairs":return"Stairs.png";case"Cafeteria":return"Cafeteria.png"}}function lt(e,t){if(e!=null)for(var n=0;n<e.surfaceBranchKeys.length;n++){var i=e.surfaceBranchKeys[n],s=K.branches[i];if(s==null)return;let l=s.nodes.map(o=>({x:o.position.x,y:o.position.z}));a.fillStyle=Zt(t,.3),a.beginPath(),a.moveTo(l[0].x,l[0].y),l.slice(1).forEach(o=>a.lineTo(o.x,o.y)),a.closePath(),a.fill()}}function Zt(e,t=1){let n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return`rgba(${n}, ${i}, ${s}, ${t})`}function te(e,t){for(let n of Object.values(P.branches)){if(n.groupId!==t.id||n.layerId!==e.id)continue;let i=n.nodes.map(s=>({x:s.position.x,y:s.position.z}));a.fillStyle=e.color,a.beginPath(),a.moveTo(i[0].x,i[0].y),i.slice(1).forEach(s=>a.lineTo(s.x,s.y)),a.closePath(),a.fill()}}function ee(e,t){for(let n of Object.values(P.branches)){if(n.groupId!==t.id||n.layerId!==e.id)continue;let i=n.nodes.map(s=>({x:s.position.x,y:s.position.z}));a.lineWidth=e.lineThickness,a.strokeStyle=e.color,a.beginPath(),a.moveTo(i[0].x,i[0].y),i.slice(1).forEach(s=>a.lineTo(s.x,s.y)),a.stroke()}}function z(e){if(K==null)return-1;for(var t=0;t<K.groups.length;t++){var n=K.groups[t];if(n.id==e)return t}return-1}function W(e){if($==null)return null;for(var t=0;t<$.locations.length;t++){var n=$.locations[t];if(n.id===e)return n}return null}function Bt(e){$=new ot(e);let t=document.querySelector("#locationBadge span");t.textContent=$.name,x()}function Dt(e){P=new _(e),x()}function Ft(e){K=new _(e),x()}function G(e){if(e==null){C=null,Pt(),D.clearRect(0,0,F.width,F.height);return}Pt(),setTimeout(()=>{C=new nt(e),dt(),Z=requestAnimationFrame(Ot)},0)}function Pt(){Z&&(cancelAnimationFrame(Z),Z=null)}function ne(){ct=[],j=[0],U=0;let e=K.groups[h],t=C.floors[e.id];if(!t){U=0;return}let n=t.nodes;for(let i=0;i<n.length-1;i++){let s=n[i+1].x-n[i].x,l=n[i+1].z-n[i].z,o=Math.hypot(s,l);ct.push(o),j.push(j[i]+o)}U=j[j.length-1]||0,A=0}function oe(e,t){let n=Object.keys(e),i=n.indexOf(t);if(i>=0&&i+1<n.length)return n[i+1]}function dt(){if(C==null)return;let e=document.getElementById("directionsBanner"),t=document.getElementById("directions");var n=K.groups[h],i=C.floors[n.id];if(!i){let I=Object.keys(C.floors);if(I.length!=0){let f=z(I[0]),M=`Please switch map to ${q(f)}.`;t.textContent=M,e.classList.remove("hidden")}else e.classList.add("hidden");return}var s=W(i.fromId),l=W(i.toId);if(s==null||l==null)return;let o=s.name?s.name:w[s.locationType],r=l.name?l.name:w[l.locationType],u="";window.IndoorLens.unit=="m"?u=i.pathLength.toFixed(1)+" m":u=(i.pathLength*3.28084).toFixed(1)+" feet";let c=C.floors,d=n.id,p=oe(c,d),g=z(p),L="";p!=null?L=`On ${q(h)}, from ${o} ${u} to ${r}. then to the ${q(g)}.`:L=`On ${q(h)}, from ${o} ${u} to ${r}.`,t.textContent=L,e.classList.remove("hidden"),ne(),x()}function q(e){if(e==0)return"ground floor";if(e==1)return"first floor";if(e==2)return"second floor";if(e==3)return"third floor";if(e==4)return"fourth floor";if(e==5)return"fifth floor";if(e==6)return"sixth floor";if(e==7)return"seventh floor";if(e==8)return"eighth floor";if(e==9)return"ninth floor";if(e==10)return"tenth floor"}var Y,F,a,D,Z,C,K,P,$,A,ct,j,U,Gt,Ct,Q=X(()=>{at();st();ut();st();Y=null,F=null,a=null,D=null,Z=null;C=null,K=null,P=null,$=null;A=0,ct=[],j=[],U=0,Gt=.15;Ct=new Map;x()});async function ht(e){let t=await fetch(e,{mode:"cors"});if(!t.ok)throw new Error(`${t.status}\xA0${t.statusText} \u2013 ${e}`);return t.json()}async function zt({onMap:e,onLayout:t,onPath:n}){let i=window.IndoorLens?.cfg?.mapid??"";console.log("Loading map data for mapId:",i);let s=document.getElementById("loadingOverlay"),l=document.getElementById("deadOverlay");s?.classList.remove("d-none"),l?.classList.add("d-none");try{let o=`${pt}MapHandler?filename=${i}/map.txt&code=${ft}`,r=`${pt}LayoutHandler?filename=${i}/layout.txt&code=${ft}`,u=`${pt}PathHandler?filename=${i}/path.txt&code=${ft}`,[c,d,p]=await Promise.all([ht(o),ht(r),ht(u)]);e?.(c),t?.(d),n?.(p)}catch(o){console.error("loadInitialData error:",o),l?.classList.remove("d-none")}finally{s?.classList.add("d-none")}}async function gt({fromId:e,toId:t,WCHR:n=!0,onResult:i}){console.log("fromId:",e),console.log("toId:",t),console.log("WCHR:",n);let s=window.IndoorLens?.cfg?.mapid??"",l=document.getElementById("loadingOverlay"),o=document.getElementById("deadOverlay");l?.classList.remove("hidden"),o?.classList.add("hidden"),console.log("Requesting path from",e,"to",t);try{let r=`${pt}PathFindingHandler?code=${ft}&mapid=${encodeURIComponent(s)}&from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&WCHR=${n}`,u=await ht(r);i?.(u)}catch(r){console.error("PathFinding fetch error:",r),o?.classList.remove("hidden")}finally{l?.classList.add("hidden")}}var pt,ft,mt=X(()=>{pt="https://indoorlensmaps.azurewebsites.net/api/",ft="Gh8s0sQm4Uy1U3bW-6MQ2M3U3PXxpPvEngTNcYmLvBPJAzFuc1df1w=="});function $t(){let e=document.getElementById("btnPlus"),t=document.getElementById("btnMinus"),n=document.getElementById("groupLabel"),i=document.getElementById("wchr"),s=document.getElementById("walk");function l(){n.textContent=h}l(),e.addEventListener("click",()=>{P&&(h=Math.min(h+1,P.groups.length-1),l(),dt(),x())}),t.addEventListener("click",()=>{P&&(h=Math.max(h-1,0),l(),dt(),x())}),s.addEventListener("click",()=>{tt=!0,i.style.display="flex",s.style.display="none",S!=null&&O!=null&&gt({fromId:S,toId:O,WCHR:tt,onResult:f=>{G(f)}})}),i.addEventListener("click",()=>{tt=!1,i.style.display="none",s.style.display="flex",S!=null&&O!=null&&gt({fromId:S,toId:O,WCHR:tt,onResult:f=>{G(f)}})});let o=document.getElementById("from"),r=document.getElementById("to"),u=document.getElementById("fromResultsList"),c=document.getElementById("toResultsList"),d=document.getElementById("btnFromClear"),p=document.getElementById("btnToClear");o.addEventListener("input",()=>{d.disabled=o.value.trim()===""}),d.addEventListener("click",()=>{o.value="",d.disabled=!0,o.focus(),document.getElementById("directionsBanner").classList.add("hidden"),S=null,G(null),x()}),r.addEventListener("input",()=>{p.disabled=r.value.trim()===""}),p.addEventListener("click",()=>{r.value="",p.disabled=!0,o.focus(),document.getElementById("directionsBanner").classList.add("hidden"),O=null,G(null),x()});function g(f){return f.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function L(f,M){let b=g(M.trim());if(!b)return[];let T=[],v=[],k=[];for(let m of f){let et=g(m.name??""),yt=g(m.tags??""),xt=g(w[m.locationType]||"");et.includes(b)?T.push(m):yt.includes(b)?v.push(m):w[m.locationType]!="Custom"&&xt.includes(b)&&k.push(m)}let R=(m,et)=>m.sort((yt,xt)=>{let Xt=g(et(yt)),Nt=g(et(xt));return Xt.indexOf(b)-Nt.indexOf(b)});return R(T,m=>m.name??""),R(v,m=>m.tags??""),R(k,m=>w[m.locationType]??""),[...T,...v,...k]}function I(f,M){f.addEventListener("input",()=>{let b=f.value.trim().toLowerCase();if(!b){M.innerHTML="";return}let T=L($.locations,b);M.innerHTML=T.map(v=>{let k=z(v.groupId),R=v.name?v.name:w[v.locationType];return`<li
            class="list-group-item list-group-item-action p-1"
            data-id="${v.id}"
          >
            ${R} on ${q(k)}
          </li>`}).join("")}),M.addEventListener("click",b=>{let T=b.target.closest("li");if(!T)return;let v=T.dataset.id,k=T.textContent.trim();f.value=k;let R=f.id;M.innerHTML="",R=="from"?S=v:R=="to"&&(O=v),x(),S!=null&&O!=null&&gt({fromId:S,toId:O,WCHR:tt,onResult:m=>{G(m)}})})}I(o,u),I(r,c)}var S,O,h,tt,ut=X(()=>{at();Q();mt();Q();S=null,O=null,h=0,tt=!1});var Kt={};Wt(Kt,{IndoorLensWidget:()=>Mt,buildIndoorLensDOM:()=>Yt});function At(){if(document.getElementById("indoorlens\u2011css"))return;let e=document.createElement("style");e.id="indoorlens\u2011css",e.textContent=`
  /* ---------- page\u2011level layout ------------------------------------------------ */
  .page-container{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;margin:0;}

    .canvas-overlay{position:absolute; top:0; left:0; z-index:2; pointer-events:none;}
  .canvas-wrapper{position:relative;display:inline-block;html, font-family: 'Roboto', sans-serif;}
  .canvas-border{border:1px solid #343a40;background:#eee;display:block;}

  .loading-overlay{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background:#fff;z-index:20;}
  .loading-overlay.hidden{display:none;}
  @keyframes spin360{to{transform:rotate(360deg);}}
  .spin{width:64px;height:64px;animation:spin360 1.2s linear infinite;}

 

  .top-bar{display:flex;   flex-wrap: wrap;   gap: .5rem;align-items:stretch;position:absolute;top:0;left:0;width:100%;z-index:10;padding:4px;gap:4px;box-sizing:border-box;}

  .flex-col{flex:1 1 0;position:relative;}
  .input-group{display:flex;align-items:stretch;font-size:.875rem;margin-bottom:0;}
  .input-tag{background:#333;border:1px solid #555;border-right:0;padding:.375rem .5rem;display:flex;align-items:center;color:#eee;}
  .input-field{flex:1 1 0;border:1px solid #555;background:#222;color:#fff;padding:.375rem .5rem;font-size:.875rem;}
  .input-clear{background:#444;color:#fff;border:none;width:2rem;display:flex;align-items:center;justify-content:center;cursor:pointer; border-top-right-radius:0.25rem; border-bottom-right-radius:0.25rem;border-top-left-radius:0; border-bottom-left-radius:0;}
  .input-clear:disabled{opacity:.4;cursor:default;}

  .results-list{position:absolute;left:0;right:0;top:100%;margin-top:.25rem;z-index:11;max-height:200px;overflow-y:auto;list-style:none;padding:0;background:#222; border:1px solid #555;color:#fff;text-align:left;}
  .results-list li{padding:.25rem .5rem;cursor:pointer;color:inherit;text-align:left;}
  .results-list li:hover{background:#3a3a3a;}
  .results-list:empty{display:none;}

 
/* Mobile stack: each flex-col (From/To) gets its own row */
@media (max-width: 768px) {

 
  .top-bar {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 0.5rem;          /* space between rows */
  }

  .flex-col {
    flex: none;           /* cancel the default flex:1 1 0 */
    width: 100%;          /* full width of the .top-bar */
  }

  /* keep the label/field/button in one line */
  .input-group {
    display: flex;
    flex-wrap: nowrap !important;
   align-items: stretch;  /* children (including .input-clear) fill the group height */
  }
  .input-field {
    flex: 1 1 auto;
    min-width: 0;
  }
 
  .input-clear {
    flex: 0 0 auto;
  }

  .input-tag {
  flex: 0 0 4rem;      /* never shrink or grow, always 4rem wide */
  min-width: 4rem;     /* ensures the same baseline width */
  text-align: center;  /* center the text within the label */
  }

 
  .input-clear {
    align-self: stretch;   /* full height */
    border-top-right-radius: 0.25rem;
    border-bottom-right-radius: 0.25rem;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

 
  .brand-badge span,
    .location-badge   span {
      font-size: 10px;
      align-self: flex-end;
    }

    .top-bar,
    #groupPanel,
    .accessibility-btn {
      transform: scale(0.8);
      transform-origin: top left;
    }
    
    /* Since scale shrinks the box but not the space it occupies,
      you may need to pull it back up/left a bit: */
    .top-bar   {     width: calc(100% / 0.8);     }
    #groupPanel { margin-right: -0.2rem; }
}
  .brand-badge,
  .location-badge {
    position: absolute;
    bottom: 7px;
    display: flex; align-items: center;
    font-family: 'Roboto', sans-serif;
  }

  .brand-badge {left: 7px;}
  .location-badge {right: 7px;}

  .brand-badge img,
  .location-badge img {
    width: 20px;
    height: 20px;
 
  }
 
   .brand-badge span,
  .location-badge   span {
 
  color: #0c0c0c;
  font-family: 'Roboto', sans-serif;
   align-self: flex-end;
}
   #otherPanel{position:absolute;right:7px;
   top:39% ;
   transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;background:rgba(0,0,0,.2);border:2px solid #ffffff33;border-radius:.3rem; }

  #floorPanel{position:absolute;right:7px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;background:rgba(0,0,0,.2);border:2px solid #ffffff33;border-radius:.3rem; }
  #floorPanel span{color:#fff;font-weight:600; }
  .panel-btn{width:28px;height:28px;padding:0;margin-bottom:.25rem;background:#444;border:1px solid #555;font-size:1rem;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;border-radius:.25rem;}
  .panel-btn:last-child{margin-bottom:0;}
  .hidden{display:none;}


/* Container sits just under the top-bar */
.directions-banner {
  
  width: 100%;
  box-sizing: border-box;
  padding: 0.5rem 1rem;
  background: rgba(0, 0, 0, 0.75);
  color: #fff;
  font-family: 'Roboto', sans-serif;
  font-size: 0.875rem;
  text-align: center;
   z-index: 15;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Hide by default */
.directions-banner.hidden {
  opacity: 0;
  visibility: hidden;
}

/* Show by removing \u201Chidden\u201D */
.directions-banner:not(.hidden) {
  opacity: 1;
  visibility: visible;
}

 


  `,document.head.appendChild(e)}function Yt(e,{width:t=1e3,height:n=600}={}){At();let i=document.createElement("div");i.className="canvas-wrapper";let s=typeof t=="number"?`${t}px`:t,l=typeof n=="number"?`${n}px`:n;i.style.width=s,i.style.height=l,e.appendChild(i);let o=document.createElement("canvas");o.id="canvasMain",o.className="canvas-border",o.style.width="100%",o.style.height="100%",i.appendChild(o),requestAnimationFrame(()=>{let d=o.getBoundingClientRect(),p=window.devicePixelRatio||1;o.width=Math.round(d.width*p),o.height=Math.round(d.height*p),o.getContext("2d").scale(p,p)});let r=document.createElement("canvas");r.id="canvasOverlay",r.className="canvas-overlay",r.style.width="100%",r.style.height="100%",i.appendChild(r),requestAnimationFrame(()=>{let d=r.getBoundingClientRect(),p=window.devicePixelRatio||1;r.width=Math.round(d.width*p),r.height=Math.round(d.height*p),r.getContext("2d").scale(p,p)}),i.insertAdjacentHTML("beforeend",`
    <div id="loadingOverlay" class="loading-overlay hidden">
      <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/Loader.png" class="spin" alt="loading"/>
    </div>
    <div id="deadOverlay" class="loading-overlay hidden">
      <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/Dead.png" alt="dead"/>
    </div>`);let u=i.querySelector("#loadingOverlay"),c=i.querySelector("#deadOverlay");return i.insertAdjacentHTML("beforeend",`
    <div class="top-bar">
      <div class="flex-col">
        <div class="input-group">
          <span class="input-tag">From</span>
          <input id="from" type="text" class="input-field" placeholder="Search from\u2026" />
          <button id="btnFromClear" class="input-clear" disabled>&times;</button>
        </div>
        <ul id="fromResultsList" class="results-list"></ul>
      </div>

      <div class="flex-col">
        <div class="input-group">
          <span class="input-tag">To</span>
          <input id="to" type="text" class="input-field" placeholder="Search to\u2026" />
          <button id="btnToClear" class="input-clear"  disabled>&times;</button>
        </div>
        <ul id="toResultsList" class="results-list"></ul>
      </div>
       <div id="directionsBanner" class="directions-banner hidden">
  <p id="directions">Turn right at the escalator, then go straight for 30 m.</p>
</div> 
    </div>  

    `),i.insertAdjacentHTML("beforeend",`
    <div class="brand-badge">
      <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/IconDark.png" alt="IndoorLens icon" />
      <span>IndoorLens.com</span>
    </div>

    <div id="locationBadge" class="location-badge"  >
      <span></span>
      <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/LocationPin.png" alt="IndoorLens location" />
    </div>
`),i.insertAdjacentHTML("beforeend",`
    <div id="floorPanel">
      <button id="btnPlus" class="panel-btn">+</button>
      <span id="groupLabel">0</span>
      <button id="btnMinus" class="panel-btn">\u2212</button>
    </div>

   <div id="otherPanel">
      <button id=  "wchr" class="panel-btn hidden">
            <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/Wchr.png" alt="Wheelchair" width="16" height="16">
      </button>
      <button id= "walk" class="panel-btn">
            <img src="https://cdn.jsdelivr.net/gh/elseforty/IndoorLens/LocationIcons/Walk.png" alt="Walk" width="16" height="16">
      </button>
    </div>`),{canvasMain:o,canvasOverlay:r,loadingOverlay:u,deadOverlay:c}}var Mt,jt=X(()=>{mt();ut();Q();Mt=class{constructor(t,n){this.root=t,this.opts=n,At();let i=Yt(this.root,{width:this.opts.width,height:this.opts.height});this.loadingOverlay=i.loadingOverlay,this.deadOverlay=i.deadOverlay,St(i.canvasMain,i.canvasOverlay),$t(this.root),this.initLogic()}initLogic(){this.loadingOverlay?.classList.remove("hidden"),zt({onMap:t=>Bt(t),onLayout:t=>Dt(t),onPath:t=>Ft(t)}).finally(()=>{this.loadingOverlay?.classList.add("hidden")})}}});at();ut();mt();st();function ie(e={}){let t=Object.assign({},e);window.IndoorLens=window.IndoorLens||{},window.IndoorLens.cfg={target:t.target,mapid:t.mapid,apiKey:t.apiKey,unit:t.unit},window.IndoorLens.mapid=t.mapid,window.IndoorLens.apiKey=t.apiKey,window.IndoorLens.unit=t.unit;let n=typeof t.target=="string"?document.querySelector(t.target):t.target;if(!n)throw new Error("IndoorLens: target element not found");Promise.resolve().then(()=>(jt(),Kt)).then(({IndoorLensWidget:i})=>{let s=new i(n,t);window.IndoorLensWidget=s})}typeof window<"u"&&(window.IndoorLens=window.IndoorLens||{},window.IndoorLens.init=ie);})();
//# sourceMappingURL=indoorlens.min.js.map
